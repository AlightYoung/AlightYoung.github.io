(window.webpackJsonp=window.webpackJsonp||[]).push([[58],{514:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h4",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("p",[s._v("JDK是一个复杂的软件项目。 构建它需要一定的技术，"),a("strong",[s._v("相当数量的对外部软件的依赖关系")]),s._v("以及"),a("strong",[s._v("相当强大的硬件")]),s._v("。 如果您只是想使用JDK而不是自己构建它，那么本文不适合您。 有关安装预构建好不同平台的JDK的一些方法，请参见例如"),a("a",{attrs:{href:"http://openjdk.java.net/install",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenJDK安装"),a("OutboundLink")],1),s._v("。")]),s._v(" "),a("h4",{attrs:{id:"流程预览"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#流程预览"}},[s._v("#")]),s._v(" 流程预览")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("获取源代码")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://git.openjdk.java.net/jdk/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("进行配置检查")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" configure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果由于缺少相关性（对工具链，构建工具，外部库或引导JDK）而导致配置失败，则大多数情况下它会提出有关如何解决平台问题的建议。 按照说明进行操作，然后尝试再次运行bash configure。")])]),s._v(" "),a("li",[a("p",[s._v("进行编译")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" images\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("验证新构建的JDK")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("./build/*/images/jdk/bin/java "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("运行基本测试")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" run-test-tier1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])]),s._v(" "),a("blockquote",[a("p",[s._v("看起来虽然并不复杂，但是实际上只看这个的话会有很多错误")])]),s._v(" "),a("h4",{attrs:{id:"获取源代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取源代码"}},[s._v("#")]),s._v(" 获取源代码")]),s._v(" "),a("p",[s._v("此次编译的版本是"),a("a",{attrs:{href:"https://github.com/openjdk/jdk16u",target:"_blank",rel:"noopener noreferrer"}},[s._v("jdk16u repo"),a("OutboundLink")],1)]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/openjdk/jdk16u.git\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("一些建议")])]),s._v(" "),a("ul",[a("li",[s._v("使用Linux可以避免很多问题（测试环境Ubuntu 20.04）")]),s._v(" "),a("li",[a("strong",[s._v("不要")]),s._v("让路径包含中文，空格符，或者目录很深，以免带来不必要的麻烦")]),s._v(" "),a("li",[a("strong",[s._v("建议")]),s._v("在SSD上进行编译")]),s._v(" "),a("li",[a("strong",[s._v("建议")]),s._v("8核CPU及8G以上内存")])]),s._v(" "),a("h4",{attrs:{id:"boot-jdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#boot-jdk"}},[s._v("#")]),s._v(" Boot JDK")]),s._v(" "),a("p",[s._v("构建JDK需要一个预先存在的JDK。 这称为“启动JDK”。")]),s._v(" "),a("p",[s._v("经验法则是，推荐Boot JDK的版本为N-1,")]),s._v(" "),a("p",[s._v("所以这里下载OpenJDK 15作为Boot JDK")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openjdk-15-jdk\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"外部库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#外部库"}},[s._v("#")]),s._v(" 外部库")]),s._v(" "),a("p",[s._v("缺少一些外部库会在配置时直接出错，这里按照文档建议下载了这些库")]),s._v(" "),a("p",[a("strong",[s._v("FreeType")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libfreetype6-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果配置时出错考虑主动指定参数  "),a("code",[s._v("--with-freetype-include=<path>")]),s._v(" & "),a("code",[s._v("--with-freetype-lib=<path>")])]),s._v(" "),a("p",[a("strong",[s._v("CUPS")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libcups2-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果配置时出错考虑主动指定参数  "),a("code",[s._v("--with-cups=<path>")])]),s._v(" "),a("p",[a("strong",[s._v("X11")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libx11-dev libxext-dev libxrender-dev libxrandr-dev libxtst-dev libxt-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果配置时出错考虑主动指定参数  "),a("code",[s._v("--with-x=<path>")])]),s._v(" "),a("p",[a("strong",[s._v("ALSA")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libasound2-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果配置时出错考虑主动指定参数  "),a("code",[s._v("--with-alsa=<path>")])]),s._v(" "),a("p",[a("strong",[s._v("libffi")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libffi-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("如果配置时出错考虑主动指定参数  "),a("code",[s._v("--with-libffi=<path>")])]),s._v(" "),a("h4",{attrs:{id:"构建工具"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#构建工具"}},[s._v("#")]),s._v(" 构建工具")]),s._v(" "),a("p",[s._v("同样的，还会依赖下面这些构建工具，所以继续下载")]),s._v(" "),a("p",[a("strong",[s._v("Autoconf")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" autoconf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("配置出错时考虑 "),a("code",[s._v("AUTOCONF=<path to autoconf> configure ...")])]),s._v(" "),a("p",[a("strong",[s._v("GNU Make")])]),s._v(" "),a("p",[s._v("至少需要3.81版本以后的GNU Make")]),s._v(" "),a("p",[s._v("强烈推荐4.0以上")]),s._v(" "),a("p",[s._v("通过"),a("code",[s._v("make --version")]),s._v("即可查看，显示默认就是4.2.1，所以不用进行操作。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GNU Make "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.2")]),s._v(".1\n为 x86_64-pc-linux-gnu 编译\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1988")]),s._v("-2016 Free Software Foundation, Inc.\n许可证：GPLv3+：GNU 通用公共许可证第 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 版或更新版本"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("http://gnu.org/licenses/gpl.html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("。\n本软件是自由软件：您可以自由修改和重新发布它。\n在法律允许的范围内没有其他保证。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("strong",[s._v("GNU Bash")])]),s._v(" "),a("p",[s._v("必须使用GNU Bash，且版本至少3.2")]),s._v(" "),a("p",[s._v("同样的，通过"),a("code",[s._v("bash --version")]),s._v("查看，发现是5.0.17，所以继续跳过。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("GNU bash，版本 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.0")]),s._v(".17"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("-release "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x86_64-pc-linux-gnu"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nCopyright "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("C"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2019")]),s._v(" Free Software Foundation, Inc.\n许可证 GPLv3+: GNU GPL 许可证第三版或者更新版本 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("http://gnu.org/licenses/gpl.html"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n\n本软件是自由软件，您可以自由地更改和重新发布。\n在法律许可的情况下特此明示，本软件不提供任何担保。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h4",{attrs:{id:"进行配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进行配置"}},[s._v("#")]),s._v(" 进行配置")]),s._v(" "),a("p",[s._v("这里的配置指定了参数，表示编译64位的JDK，并指定了启动JDK的目录（没指定之前出现了错误...）")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" configure --with-target-bits"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v(" --with-boot-jdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/jdk-15.0.2/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("编译过程中碰到亿个错误，但是基本可以根据提示进行解决，不行就百度。")]),s._v(" "),a("p",[s._v("比如没有fontconfig，百度后使用了apt进行安装，之后就成功了。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libfontconfig1-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("问题解决后看到")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("==")]),s._v("\nA new configuration has been successfully created "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n/home/alightyoung/Desktop/jdk16u/build/linux-x86_64-server-release\nusing configure arguments "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'--with-target-bits=64 --with-boot-jdk=/usr/local/jdk-15.0.2/'")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n\nConfiguration summary:\n* Name:           linux-x86_64-server-release\n* Debug level:    release\n* HS debug level: product\n* JVM variants:   server\n* JVM features:   server: "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'aot cds compiler1 compiler2 epsilongc g1gc graal jfr jni-check jvmci jvmti management nmt parallelgc serialgc services shenandoahgc vm-structs zgc'")]),s._v(" \n* OpenJDK target: OS: linux, CPU architecture: x86, address length: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("\n* Version string: "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-internal+0-adhoc.root.jdk16u "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-internal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nTools summary:\n* Boot JDK:       openjdk version "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"15.0.2"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-01-19 OpenJDK Runtime Environment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.0")]),s._v(".2+7-27"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" OpenJDK "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15.0")]),s._v(".2+7-27, mixed mode, sharing"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("at /usr/local/jdk-15.0.2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n* Toolchain:      gcc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("GNU Compiler Collection"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n* C Compiler:     Version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.3")]),s._v(".0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("at /usr/bin/gcc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n* C++ Compiler:   Version "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9.3")]),s._v(".0 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("at /usr/bin/g++"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\nBuild performance summary:\n* Cores to use:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("\n* Memory limit:   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("15440")]),s._v(" MB\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("p",[s._v("OK！配置至此结束，需要不同版本的JDK可以看看配置参数进行修改，配置参数在官方文档介绍的十分详细，"),a("a",{attrs:{href:"https://openjdk.java.net/groups/build/doc/building.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),a("OutboundLink")],1)]),s._v(" "),a("h4",{attrs:{id:"进行编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进行编译"}},[s._v("#")]),s._v(" 进行编译")]),s._v(" "),a("p",[s._v("配置正确之后，就可以进行编译了。")]),s._v(" "),a("p",[s._v("当使用"),a("code",[s._v("make")]),s._v("不加任何参数时，等同于"),a("code",[s._v("make default")]),s._v("或者"),a("code",[s._v("make jdk")]),s._v("，这将会构建一个尽量最小的镜像。编译后的镜像会放在"),a("code",[s._v("build")]),s._v("目录下")]),s._v(" "),a("p",[s._v("这里我们就按默认进行编译即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后就可以去喝杯Java了 - -")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Finished building target "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'default (exploded-image)'")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" configuration "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'linux-x86_64-server-release'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可以看到编译完成了，使用以下命令检查一下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("build/linux-x86_64-server-release/jdk/bin/java "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--version")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("发现可以正常使用，至此编译结束")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("openjdk "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-internal "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2021")]),s._v("-03-16\nOpenJDK Runtime Environment "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-internal+0-adhoc.root.jdk16u"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nOpenJDK "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-Bit Server VM "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("build "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-internal+0-adhoc.root.jdk16u, mixed mode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("之后可以新建一个Test.java文件测试一下")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        system"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Hello World!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("然后进入到编译之后的JDK的目录调用"),a("code",[s._v("sudo ./javac Test.java")]),s._v("和"),a("code",[s._v("sudo ./java Test")]),s._v("\n测试一下，能输出就没啥问题了")]),s._v(" "),a("blockquote",[a("p",[s._v("使用"),a("code",[s._v("./")]),s._v("是为了防止使用系统环境变量的JDK")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Hello World"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h4",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[s._v("#")]),s._v(" 最后")]),s._v(" "),a("p",[s._v("JDK的构建至此便告一段落。说一下为什么突然想编译JDK，其实是前些天略读了一遍深入理解Java虚拟机，作者建议可以尝试一下，正好也觉得挺有趣的，所以就编译了一次。因为书是第二版（二手），JDK版本比较老，所以整个过程都是跟着官方文档走的，也百度了很多配置时出现的错误，强烈推荐大家看官方文档，虽然是英文，但是确实非常详细，包括后面还有交叉编译，测试JDK的环节等，因个人才疏学浅，所以也没有再进一步进行，感兴趣的直接去"),a("a",{attrs:{href:"https://openjdk.java.net/",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenJDK"),a("OutboundLink")],1),s._v("官方网站查看即可。最后提醒一下，这个JDK 16已经是GA了，就在本文发布的前几天 - -")])])}),[],!1,null,null,null);a.default=e.exports}}]);
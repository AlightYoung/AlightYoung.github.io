<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MySQL - 汇总篇 | A·Y</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="stylesheet" href="/css/font.css">
    <link rel="icon" href="https://cdn.jsdelivr.net/gh/alightyoung/static/img/logo.png">
    <link rel="stylesheet" href="/css/katex.min.css">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.465cc0aa.css" as="style"><link rel="preload" href="/assets/js/app.f00b2d44.js" as="script"><link rel="preload" href="/assets/js/3.9e546140.js" as="script"><link rel="preload" href="/assets/js/1.e6bb5ad8.js" as="script"><link rel="preload" href="/assets/js/80.2c950173.js" as="script"><link rel="prefetch" href="/assets/js/10.cde2a8b0.js"><link rel="prefetch" href="/assets/js/11.2468027f.js"><link rel="prefetch" href="/assets/js/12.fc8f8cf4.js"><link rel="prefetch" href="/assets/js/13.4376b269.js"><link rel="prefetch" href="/assets/js/14.4bc31c1d.js"><link rel="prefetch" href="/assets/js/15.09d2bd97.js"><link rel="prefetch" href="/assets/js/16.80f33369.js"><link rel="prefetch" href="/assets/js/17.71283924.js"><link rel="prefetch" href="/assets/js/18.daec86c0.js"><link rel="prefetch" href="/assets/js/19.edd34fdc.js"><link rel="prefetch" href="/assets/js/20.742c82d0.js"><link rel="prefetch" href="/assets/js/21.6be69284.js"><link rel="prefetch" href="/assets/js/22.cff2dd1c.js"><link rel="prefetch" href="/assets/js/23.8ac2136a.js"><link rel="prefetch" href="/assets/js/24.cce04572.js"><link rel="prefetch" href="/assets/js/25.c9c74f00.js"><link rel="prefetch" href="/assets/js/26.551683df.js"><link rel="prefetch" href="/assets/js/27.e6b3583c.js"><link rel="prefetch" href="/assets/js/28.54d7427b.js"><link rel="prefetch" href="/assets/js/29.434035ba.js"><link rel="prefetch" href="/assets/js/30.b3693a51.js"><link rel="prefetch" href="/assets/js/31.9367c03a.js"><link rel="prefetch" href="/assets/js/32.5e797a5b.js"><link rel="prefetch" href="/assets/js/33.5928a440.js"><link rel="prefetch" href="/assets/js/34.abf21908.js"><link rel="prefetch" href="/assets/js/35.50a6fcc9.js"><link rel="prefetch" href="/assets/js/36.b112fc14.js"><link rel="prefetch" href="/assets/js/37.699c64dd.js"><link rel="prefetch" href="/assets/js/38.9ef6a06e.js"><link rel="prefetch" href="/assets/js/39.23c24ae7.js"><link rel="prefetch" href="/assets/js/4.24e99d16.js"><link rel="prefetch" href="/assets/js/40.53cc11bb.js"><link rel="prefetch" href="/assets/js/41.55112754.js"><link rel="prefetch" href="/assets/js/42.63dbb0d1.js"><link rel="prefetch" href="/assets/js/43.f6616d97.js"><link rel="prefetch" href="/assets/js/44.d08f71b0.js"><link rel="prefetch" href="/assets/js/45.75419aa2.js"><link rel="prefetch" href="/assets/js/46.dc9654b7.js"><link rel="prefetch" href="/assets/js/47.d4177d2d.js"><link rel="prefetch" href="/assets/js/48.0cd8e56b.js"><link rel="prefetch" href="/assets/js/49.37dd21d8.js"><link rel="prefetch" href="/assets/js/5.8ab7c490.js"><link rel="prefetch" href="/assets/js/50.06f1b0ea.js"><link rel="prefetch" href="/assets/js/51.f9aabe03.js"><link rel="prefetch" href="/assets/js/52.364b4e76.js"><link rel="prefetch" href="/assets/js/53.f508a694.js"><link rel="prefetch" href="/assets/js/54.34bf40b5.js"><link rel="prefetch" href="/assets/js/55.965e08c0.js"><link rel="prefetch" href="/assets/js/56.83af3fad.js"><link rel="prefetch" href="/assets/js/57.ab4cd18b.js"><link rel="prefetch" href="/assets/js/58.2d3a1411.js"><link rel="prefetch" href="/assets/js/59.b10aa3d8.js"><link rel="prefetch" href="/assets/js/6.ae816b8a.js"><link rel="prefetch" href="/assets/js/60.ca590893.js"><link rel="prefetch" href="/assets/js/61.1af9a6c8.js"><link rel="prefetch" href="/assets/js/62.37faafca.js"><link rel="prefetch" href="/assets/js/63.9e0adcd8.js"><link rel="prefetch" href="/assets/js/64.570e240f.js"><link rel="prefetch" href="/assets/js/65.ff1fb9bb.js"><link rel="prefetch" href="/assets/js/66.253dd570.js"><link rel="prefetch" href="/assets/js/67.2e8e7568.js"><link rel="prefetch" href="/assets/js/68.d0f968dc.js"><link rel="prefetch" href="/assets/js/69.624a6ad1.js"><link rel="prefetch" href="/assets/js/7.3946ddf2.js"><link rel="prefetch" href="/assets/js/70.9e7ecdae.js"><link rel="prefetch" href="/assets/js/71.fe9a5f56.js"><link rel="prefetch" href="/assets/js/72.0fa1b4a3.js"><link rel="prefetch" href="/assets/js/73.310af081.js"><link rel="prefetch" href="/assets/js/74.e9a82633.js"><link rel="prefetch" href="/assets/js/75.de4e154d.js"><link rel="prefetch" href="/assets/js/76.dd6e1d20.js"><link rel="prefetch" href="/assets/js/77.db6c9046.js"><link rel="prefetch" href="/assets/js/78.5bef35b1.js"><link rel="prefetch" href="/assets/js/79.7fd5b98c.js"><link rel="prefetch" href="/assets/js/8.e2a2d739.js"><link rel="prefetch" href="/assets/js/81.b2305cda.js"><link rel="prefetch" href="/assets/js/82.8fd4f588.js"><link rel="prefetch" href="/assets/js/83.2c6a02c5.js"><link rel="prefetch" href="/assets/js/84.8a3c27fe.js"><link rel="prefetch" href="/assets/js/85.b74c438e.js"><link rel="prefetch" href="/assets/js/86.bed252a0.js"><link rel="prefetch" href="/assets/js/87.2aaed5d4.js"><link rel="prefetch" href="/assets/js/88.ba3fee7a.js"><link rel="prefetch" href="/assets/js/89.f7d6f42d.js"><link rel="prefetch" href="/assets/js/9.a0882abe.js"><link rel="prefetch" href="/assets/js/90.bda2e396.js"><link rel="prefetch" href="/assets/js/91.bf73ef70.js"><link rel="prefetch" href="/assets/js/92.c78a8abf.js"><link rel="prefetch" href="/assets/js/93.6f803739.js"><link rel="prefetch" href="/assets/js/94.77aeb755.js"><link rel="prefetch" href="/assets/js/95.8f5066f3.js"><link rel="prefetch" href="/assets/js/96.91923685.js"><link rel="prefetch" href="/assets/js/97.cfd9e9ef.js">
    <link rel="stylesheet" href="/assets/css/0.styles.465cc0aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>A·Y</h3> <p class="description" data-v-59e6cb88></p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>AlightYoung</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">A·Y</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Categorys
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Guide/" class="nav-link"><i class="undefined"></i>
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Git/" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/WebServer/" class="nav-link"><i class="undefined"></i>
  WebServer
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/WebFrontend/" class="nav-link"><i class="undefined"></i>
  WebFrontend
</a></li><li class="dropdown-item"><!----> <a href="/categories/DataStructure/" class="nav-link"><i class="undefined"></i>
  DataStructure
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Server/" class="nav-link"><i class="undefined"></i>
  Server
</a></li><li class="dropdown-item"><!----> <a href="/categories/Containerization/" class="nav-link"><i class="undefined"></i>
  Containerization
</a></li><li class="dropdown-item"><!----> <a href="/categories/Backup/" class="nav-link"><i class="undefined"></i>
  Backup
</a></li><li class="dropdown-item"><!----> <a href="/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kotlin/" class="nav-link"><i class="undefined"></i>
  Kotlin
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  Timeline
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      Mirrors
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://alightyoung.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Gitee Pages
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://alightyoung.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github Pages
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/alightyoung/alightyoung.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/img/avatar.png" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    AlightYoung
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>86</h3> <h6 data-v-1fad0c41>Articles</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>61</h3> <h6 data-v-1fad0c41>Tags</h6></div></div> <ul class="social-links" data-v-1fad0c41><li class="social-item" data-v-1fad0c41><i class="iconfont reco-mail" style="color:#abbd81;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-github" style="color:#e15b64;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-mayun" style="color:#fb9b5f;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-bilibili" style="color:#67cc86;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-zhihu" style="color:#f47e60;" data-v-1fad0c41></i></li><li class="social-item" data-v-1fad0c41><i class="iconfont reco-weibo" style="color:#e15b64;" data-v-1fad0c41></i></li></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Categorys
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Guide/" class="nav-link"><i class="undefined"></i>
  Guide
</a></li><li class="dropdown-item"><!----> <a href="/categories/Java/" class="nav-link"><i class="undefined"></i>
  Java
</a></li><li class="dropdown-item"><!----> <a href="/categories/Git/" class="nav-link"><i class="undefined"></i>
  Git
</a></li><li class="dropdown-item"><!----> <a href="/categories/Algorithm/" class="nav-link"><i class="undefined"></i>
  Algorithm
</a></li><li class="dropdown-item"><!----> <a href="/categories/WebServer/" class="nav-link"><i class="undefined"></i>
  WebServer
</a></li><li class="dropdown-item"><!----> <a href="/categories/Database/" class="nav-link"><i class="undefined"></i>
  Database
</a></li><li class="dropdown-item"><!----> <a href="/categories/WebFrontend/" class="nav-link"><i class="undefined"></i>
  WebFrontend
</a></li><li class="dropdown-item"><!----> <a href="/categories/DataStructure/" class="nav-link"><i class="undefined"></i>
  DataStructure
</a></li><li class="dropdown-item"><!----> <a href="/categories/Web/" class="nav-link"><i class="undefined"></i>
  Web
</a></li><li class="dropdown-item"><!----> <a href="/categories/Server/" class="nav-link"><i class="undefined"></i>
  Server
</a></li><li class="dropdown-item"><!----> <a href="/categories/Containerization/" class="nav-link"><i class="undefined"></i>
  Containerization
</a></li><li class="dropdown-item"><!----> <a href="/categories/Backup/" class="nav-link"><i class="undefined"></i>
  Backup
</a></li><li class="dropdown-item"><!----> <a href="/categories/Shell/" class="nav-link"><i class="undefined"></i>
  Shell
</a></li><li class="dropdown-item"><!----> <a href="/categories/Kotlin/" class="nav-link"><i class="undefined"></i>
  Kotlin
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tags
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  Timeline
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-blog"></i>
      Mirrors
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="http://alightyoung.gitee.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Gitee Pages
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://alightyoung.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github Pages
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <a href="https://github.com/alightyoung/alightyoung.github.io" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>MySQL - 汇总篇</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>AlightYoung</span>
          
        <span data-v-59e6cb88>2019 - </span>
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">MySQL - 汇总篇</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>AlightYoung</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>8/4/2021</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>MySQL</span></i></div></div> <div class="theme-reco-content content__default"><p></p><div class="table-of-contents"><ul><li><a href="#_1-数据库相关概念">1. 数据库相关概念</a></li><li><a href="#_2-mysql概念及安装">2. MySQL概念及安装</a></li><li><a href="#_3-基本关键字">3. 基本关键字</a><ul><li><a href="#_3-1-select">3.1 select</a></li><li><a href="#_3-2-distinct">3.2 distinct</a></li><li><a href="#_3-3-limit">3.3 limit</a></li><li><a href="#_3-4-order-by">3.4 order by</a></li><li><a href="#_3-5-where">3.5 where</a></li><li><a href="#_3-6-not">3.6 not</a></li><li><a href="#_3-7-between">3.7 between</a></li><li><a href="#_3-8-in">3.8 in</a></li><li><a href="#_3-9-and">3.9 and</a></li><li><a href="#_3-10-or">3.10 or</a></li><li><a href="#_3-11-like">3.11 like</a></li><li><a href="#_3-12-regexp">3.12 regexp</a></li><li><a href="#_3-13-as">3.13 as</a></li><li><a href="#_3-14-group-by">3.14 group by</a></li><li><a href="#_3-15-having">3.15 having</a></li><li><a href="#_3-16-insert">3.16 insert</a></li><li><a href="#_3-17-update">3.17 update</a></li><li><a href="#_3-18-delete">3.18 delete</a></li></ul></li><li><a href="#_4-函数和运算符">4. 函数和运算符</a><ul><li><a href="#_4-1-运算符">4.1 运算符</a></li><li><a href="#_4-2-函数">4.2 函数</a></li></ul></li><li><a href="#_5-高级部分">5. 高级部分</a><ul><li><a href="#_5-1-子查询-subquery">5.1 子查询（subquery）</a></li><li><a href="#_5-2-连表查询-join">5.2 连表查询（join）</a></li><li><a href="#_5-3-组合查询-union">5.3 组合查询（union）</a></li><li><a href="#_5-4-全文索引-fulltext-index">5.4 全文索引（fulltext index）</a></li><li><a href="#_5-5-视图-view">5.5 视图（view）</a></li><li><a href="#_5-6-存储过程-stored-procedure">5.6 存储过程（Stored Procedure）</a></li><li><a href="#_5-7-游标-cursor">5.7 游标（cursor）</a></li><li><a href="#_5-8-触发器-trigger">5.8 触发器（trigger）</a></li><li><a href="#_5-9-事务-transaction">5.9 事务（transaction）</a></li></ul></li><li><a href="#_6-一些提示与建议">6. 一些提示与建议</a><ul><li><a href="#_6-1-select语句的关键字顺序">6.1 select语句的关键字顺序</a></li></ul></li><li><a href="#_7-常见sql语句">7. 常见SQL语句</a><ul><li><a href="#_7-1-数据库相关">7.1 数据库相关</a></li><li><a href="#_7-2-表相关">7.2 表相关</a></li><li><a href="#_7-3-用户权限相关">7.3 用户权限相关</a></li><li><a href="#_7-4-字符集相关">7.4 字符集相关</a></li></ul></li></ul></div><p></p> <h2 id="_1-数据库相关概念"><a href="#_1-数据库相关概念" class="header-anchor">#</a> 1. 数据库相关概念</h2> <p><strong>数据库（Database）</strong>：Database是按照数据结构来组织、存储和管理数据的仓库。</p> <p><strong>数据库管理系统（Database Management System）</strong>：数据库管理系统是一种操纵和管理数据库的大型软件，用于建立、使用和维护数据库，简称DBMS。DBMS可分为<strong>关系型数据库管理系统</strong>（Relational Database Management System：RDBMS）与<strong>NoSQL</strong>（Not only SQL：对不同于传统的关系数据库的数据库管理系统的统称）。</p> <p><strong>数据库系统（Database System）</strong>：数据库系统，是由数据库及其管理软件组成的系统。</p> <div class="custom-block warning"><p class="title"></p><p>现实中可能会经常听到一些人使用“数据库”（Database）来表示“数据库管理系统”（Database Managment System）这一概念，但其实这是两个不同的概念，只是被简化了，例如我们通常使用“法人”表示“法人代表”，但其实“法人”表示的是组织。</p></div><p><strong>模式（schema）</strong>：关于数据库和表的布局及特性的信息。</p> <div class="custom-block warning"><p class="title"></p><p>在某些时候，schema也可用于表示数据库。</p></div><p><strong>表（table）</strong>：数据库中的特定类型数据的结构化清单。</p> <p><strong>列（column）</strong>：表中的一个字段。所有表都是由一个或多个列组成的。</p> <p><strong>行（row）</strong>：表中的数据是按行存储的，所保存的每个记录存储在自己的行内。有时也称为记录（record）。</p> <p><strong>数据类型（datatype）</strong>：每一列都可以根据自身的特性选择特定的数据类型。</p> <p><strong>主键（primary key）</strong>：通常用于确定唯一的行，所以主键是不能重复的。</p> <p><strong>外键（foreign key）</strong>：表中存储的与其他表主键关联的键，叫外键。</p> <p><strong>索引（index）</strong>：相当于对列添加目录，用于加速列的查询。</p> <p><strong>SQL</strong>：结构化查询语言（Structured Query Language）的缩写。用于与数据库通信。</p> <h2 id="_2-mysql概念及安装"><a href="#_2-mysql概念及安装" class="header-anchor">#</a> 2. MySQL概念及安装</h2> <p>MySQL是一个关系型数据库管理系统，由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品。因为其开源的特性所以成为了当下较为流行的DBMS。目前为止MySQL已经更新到了8这个大版本，也算是久经沙场了。</p> <p>对于初学者来说，你可以使用MySQL自带的命令行工具来学习MySQL，也可以使用第三方MySQL管理软件，例如开源的<a href="https://dbeaver.io/" target="_blank" rel="noopener noreferrer">Dbeaver<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>MySQL官方网站：<a href="https://www.mysql.com/" target="_blank" rel="noopener noreferrer">https://www.mysql.com/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>直接下载MySQL社区服务端：<a href="https://dev.mysql.com/downloads/mysql/" target="_blank" rel="noopener noreferrer">MySQL Community Server Download<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，根据自己需求下载压缩包或者是MSI安装程序，新手建议选择MSI安装程序。</p> <p>下载完成之后双击安装程序即可，过程选项看着选，看不懂就翻译，这里不多赘述。</p> <p><a href="https://dev.mysql.com/doc/refman/8.0/en/" target="_blank" rel="noopener noreferrer">MySQL 8.0参考手册<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，下载安装等相关指南都在里面了，如果只是下载和入门只需要过一下<a href="https://dev.mysql.com/doc/refman/8.0/en/installing.html" target="_blank" rel="noopener noreferrer">Installing and Upgrading MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="https://dev.mysql.com/doc/refman/8.0/en/tutorial.html" target="_blank" rel="noopener noreferrer">Tutorial<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这两个篇章就行了（看着吃力就翻译）。</p> <p>安装完成之后，尝试使用 <code>mysql -u root -p</code> ，根据提示输入密码即可连接到本地MySQL服务端。</p> <div class="custom-block warning"><p class="title"></p><p>提示没有mysql这个指令则需要将mysql安装目录下的bin目录添加到环境变量即可</p></div><p>登录之后可以 <code>show databases;</code> 查看所有数据库，<code>use {database_name}</code> 切换数据库，<code>show tables;</code>查看当前数据库下的所有表，<code>describe {table_name};</code>查看表结构等。(<em>大括号里替代成具体的数据库/表的名称</em>)</p> <h2 id="_3-基本关键字"><a href="#_3-基本关键字" class="header-anchor">#</a> 3. 基本关键字</h2> <p>以下均使用<code>table</code>代替表名，<code>column</code>代替列名。</p> <h3 id="_3-1-select"><a href="#_3-1-select" class="header-anchor">#</a> 3.1 select</h3> <p>用于查询数据。</p> <p>常见用法：</p> <ol><li>查询全部数据：<code>select * from table;</code></li> <li>查询单/多列：<code>select column/column1,column2 from table;</code></li></ol> <div class="custom-block tip"><p class="title"></p><p>在使用列名是可以使用<strong>表名.列名</strong>的写法，例如<code>select table.column from table;</code>，这在之后的联表查询会经常使用。</p></div><h3 id="_3-2-distinct"><a href="#_3-2-distinct" class="header-anchor">#</a> 3.2 distinct</h3> <p>用于剔除结果中的重复数据。</p> <p>常见用法：</p> <ol><li>查询去重：<code>select distinct column from table;</code></li></ol> <h3 id="_3-3-limit"><a href="#_3-3-limit" class="header-anchor">#</a> 3.3 limit</h3> <p>限制结果集。不指定正反则默认为正序，即按照<code>asc</code>方式进行排序.</p> <p>常见用法：</p> <ol><li>限制为1条记录：<code>select * from table limit 1;</code></li> <li>偏移限制-写法1：<code>select * from table limit 2 , 3;</code></li> <li>偏移限制-写法1: <code>select * from table limit 3 offset 2;</code></li></ol> <p>以上两种写法都代表从第二条记录后取3条数据，即(3,4,5)</p> <h3 id="_3-4-order-by"><a href="#_3-4-order-by" class="header-anchor">#</a> 3.4 order by</h3> <p>用于对数据排序。</p> <p>常见用法：</p> <ol><li>正序排序1：<code>select * from table order by column;</code></li> <li>正序排序2: <code>select * from table order by column asc;</code></li> <li>倒序排序：<code>select * from table order by column desc;</code></li> <li>多列排序：<code>select * from table order by column1 asc,column2 desc;</code></li></ol> <h3 id="_3-5-where"><a href="#_3-5-where" class="header-anchor">#</a> 3.5 where</h3> <p>用于对数据的过滤，其后可以接子句等其他表达式。</p> <p>常见用法：</p> <ol><li>查询列值为1的记录：<code>select * from table where column = 1;</code></li> <li>查询列值为Null的记录：<code>select * from table where column is null;</code></li></ol> <p>在上述示例中我们只使用了“＝”这个比较符号，在MySQL中还有这些比较符号可以在where语句中使用。</p> <table><thead><tr><th style="text-align:center;">符号</th> <th style="text-align:center;">含义</th></tr></thead> <tbody><tr><td style="text-align:center;">=</td> <td style="text-align:center;">等于</td></tr> <tr><td style="text-align:center;">&lt;&gt;</td> <td style="text-align:center;">不等于</td></tr> <tr><td style="text-align:center;">!=</td> <td style="text-align:center;">不等于</td></tr> <tr><td style="text-align:center;">&lt;</td> <td style="text-align:center;">小于</td></tr> <tr><td style="text-align:center;">&lt;=</td> <td style="text-align:center;">小于等于</td></tr> <tr><td style="text-align:center;">&gt;</td> <td style="text-align:center;">大于</td></tr> <tr><td style="text-align:center;">&gt;=</td> <td style="text-align:center;">大于等于</td></tr></tbody></table> <div class="custom-block warning"><p class="title"></p><p>注意：null是这个列没有被赋值，而不是空字符串或者空格，也不是0。</p></div><h3 id="_3-6-not"><a href="#_3-6-not" class="header-anchor">#</a> 3.6 not</h3> <p>常用于对逻辑取反。例如与<code>between</code>与<code>in</code>的取反。</p> <h3 id="_3-7-between"><a href="#_3-7-between" class="header-anchor">#</a> 3.7 between</h3> <p>常用于与where配合限制数据在某个区间内。</p> <p>常见用法：</p> <ol><li>查询列值在1到10之间的记录：<code>select * from table where column between 1 and 10;</code></li> <li>查询列值不在1到10之间的记录：<code>select * from table where column not between 1 and 10;</code></li></ol> <h3 id="_3-8-in"><a href="#_3-8-in" class="header-anchor">#</a> 3.8 in</h3> <p>常用于配合where语法，对数据进行结果集过滤。</p> <p>常见用法：</p> <ol><li>查询列值在某个结果集的记录：<code>select * from table where column in (1,2);</code></li> <li>查询列值不在某个结果集的记录：<code>select * from table where column not in (1,2);</code></li></ol> <h3 id="_3-9-and"><a href="#_3-9-and" class="header-anchor">#</a> 3.9 and</h3> <p>常用于与where语句配合，进行多条件的逻辑与判断</p> <div class="custom-block warning"><p class="title"></p><p><code>and</code>与<code>or</code>同时使用<code>and</code>拥有更多的优先级，当同时使用时，推荐使用括号来明确优先级。</p></div><p>常见用法：</p> <ol><li>限制多属性查询：<code>select * from table where column1 = 1 and column2 = '计算机';</code></li></ol> <h3 id="_3-10-or"><a href="#_3-10-or" class="header-anchor">#</a> 3.10 or</h3> <p>常用于与where语句配合，进行多条件的逻辑或判断</p> <p>常见用法：</p> <ol><li>限制单属性多选择：<code>select * from table where column = 1 or column = 2;</code></li> <li>等上写法：<code>select * from table where column in (1,2);</code></li> <li>等上写法：<code>select * from table where column between 1 and 2;</code></li></ol> <div class="custom-block warning"><p class="title"></p><p><code>and</code>与<code>or</code>同时使用<code>and</code>拥有更多的优先级，当同时使用时，推荐使用括号来明确优先级。</p></div><h3 id="_3-11-like"><a href="#_3-11-like" class="header-anchor">#</a> 3.11 like</h3> <p>用于模糊匹配，常与<code>%</code>一起使用。</p> <p>另一个通配符是<code>_</code>，和<code>%</code>不同的是，<code>_</code>只能匹配单个字符。</p> <p>常见用法：</p> <ol><li>左模糊：<code>select * from table where column like '1%';</code></li> <li>右模糊：<code>select * from table where column like '%1';</code></li> <li>中间模糊：<code>select * from table where column like '1%1';</code></li> <li>左右模糊：<code>select * from table where column like '%1%';</code></li></ol> <div class="custom-block warning"><p class="title"></p><p>模糊查询效率相对较低，如果可以简单查询的话，尽量使用简单明确的条件过滤。</p></div><h3 id="_3-12-regexp"><a href="#_3-12-regexp" class="header-anchor">#</a> 3.12 regexp</h3> <p>用于进行正则表达式过滤。</p> <p>常见用法：</p> <ol><li>查询包含1的结果集：<code>select * from table where column regexp '1';</code></li> <li>查询包含<code>1%</code>的结果集：`select * from table where column regexp '1.'</li></ol> <p>这里的<code>.</code>是正则表达式中用于匹配任意一个字符的，更多正则表达式的内容可以查看：<a href="https://github.com/ziishaned/learn-regex" target="_blank" rel="noopener noreferrer">Github：learn-regex<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="title"></p><p>你可以不查询表来测试正则表达式，像这样<code>select 'hello' regexp '[:alpha:]';</code>，如果匹配则返回1，反之为0。</p></div><h3 id="_3-13-as"><a href="#_3-13-as" class="header-anchor">#</a> 3.13 as</h3> <p>为列取别名。</p> <p>常见用法：</p> <ol><li>别名：<code>select t.column as new_name from table as t;</code></li> <li>简写：<code>select t.column new_name from table t;</code></li></ol> <h3 id="_3-14-group-by"><a href="#_3-14-group-by" class="header-anchor">#</a> 3.14 group by</h3> <p>将数据进行分组</p> <p>常见用法：</p> <ol><li>按列分组：<code>select column count(column) from table group by column;</code></li></ol> <div class="custom-block warning"><p class="title"></p><p>GROUP BY子句必须出现在WHERE子句之后，ORDER BY子句之前。</p></div><h3 id="_3-15-having"><a href="#_3-15-having" class="header-anchor">#</a> 3.15 having</h3> <p>对分组数据进行过滤，类似where，但是where不能过滤分组数组，因为where是用于过滤行的，大多数情况下都可以使用having代替where。</p> <p>常见用法：</p> <ol><li>分组并取count大于等于2的：<code>select column count(column) from table group by column having count(*) &gt;= 2;</code></li></ol> <h3 id="_3-16-insert"><a href="#_3-16-insert" class="header-anchor">#</a> 3.16 insert</h3> <p>新增记录。</p> <p>常见用法：</p> <ol><li>按照表中的列顺序插入：<code>insert into table values(xxx,xxx,xxx...);</code></li> <li>自定义列及顺序插入：<code>insert into table(id,name,age...) values(null,'test',18...)</code></li> <li>多行插入：<code>insert into table values(xxx,xxx,xxx...),(xxx,xxx,xxx...)</code></li></ol> <div class="custom-block tip"><p class="title"></p><p>你还可以在insert的values部分使用select语句返回的值作为value插入，需要注意的是涉及唯一的列需要变动时，如果id设置了自增那么可以不用插入id。</p> <p>类似<code>INSERT INTO table(column1,column2) SELECT column1, column2 FROM articles</code></p></div><h3 id="_3-17-update"><a href="#_3-17-update" class="header-anchor">#</a> 3.17 update</h3> <p>更新记录。</p> <p>常见用法：</p> <ol><li>更新指定数据：<code>update table set column1 = 1 where column2 = 2</code></li> <li>更新多列：<code>update table set column1 = 1,column2 = 2 where column3 = 3</code></li></ol> <h3 id="_3-18-delete"><a href="#_3-18-delete" class="header-anchor">#</a> 3.18 delete</h3> <p>删除数据。</p> <p>常见用法：</p> <ol><li>删除指定记录：<code>delete from table where column1 = 1</code></li></ol> <h2 id="_4-函数和运算符"><a href="#_4-函数和运算符" class="header-anchor">#</a> 4. 函数和运算符</h2> <p>此章节内容参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/functions.html" target="_blank" rel="noopener noreferrer">官方手册 - 函数与运算符章节<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://www.w3schools.com/mysql/mysql_ref_functions.asp" target="_blank" rel="noopener noreferrer">w3school - MySQL函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <div class="custom-block tip"><p class="title"></p><p>手册版本为8.0</p></div><h3 id="_4-1-运算符"><a href="#_4-1-运算符" class="header-anchor">#</a> 4.1 运算符</h3> <p>四则运算（+、-、*、/）是最为常见的运算符。例如你想对一个数进行平方，可以这样 <code>select column column * column square from table;</code></p> <p>更多内容建议参考<a href="https://dev.mysql.com/doc/refman/8.0/en/non-typed-operators.html" target="_blank" rel="noopener noreferrer">官方手册-运算符<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_4-2-函数"><a href="#_4-2-函数" class="header-anchor">#</a> 4.2 函数</h3> <p>如果是想细节了解函数，建议参考上面的官方手册。</p> <p>以下仅简单按照几个方面介绍一些常用的函数。</p> <ul><li>字符串函数</li> <li>数值函数</li> <li>日期与时间函数</li></ul> <h4 id="_4-2-1-字符串函数"><a href="#_4-2-1-字符串函数" class="header-anchor">#</a> 4.2.1 字符串函数</h4> <p><strong>concat()</strong>：用于拼接字符串，<code>select concat('hello',' world !');</code><br> <strong>left()</strong>：返回字符串左边n位，<code>right()</code>同理<br> <strong>length()</strong>：返回字符串长度<br> <strong>lower()</strong>：小写函数。大写为<code>upper()</code><br> <strong>trim()</strong>：删除前后空格，衍生函数：<code>ltrim()</code>、<code>rtrim()</code><br> <strong>locate()</strong>：返回子字符串在字符串中第一次出现的位置，<code>SELECT LOCATE(&quot;3&quot;, &quot;W3Schools.com&quot;);</code><br> <strong>repeat()</strong>：重复字符串，<code>SELECT REPEAT(&quot;SQL Tutorial&quot;, 3);</code><br> <strong>replace()</strong>: 替换字符串，<code>SELECT REPLACE(&quot;SQL Tutorial&quot;, &quot;SQL&quot;, &quot;HTML&quot;);</code><br> <strong>reverse()</strong>：反转字符串，<code>SELECT REVERSE(&quot;SQL Tutorial&quot;);</code><br> <strong>substr()</strong>：截取字符串，同<code>substring()</code>，<code>SELECT SUBSTR(&quot;SQL Tutorial&quot;, 5, 3);</code></p> <h4 id="_4-2-2-数值函数"><a href="#_4-2-2-数值函数" class="header-anchor">#</a> 4.2.2 数值函数</h4> <p><strong>abs()</strong>：获取数值绝对值<br> <strong>avg()</strong>：平均值，<code>SELECT AVG(Price) AS AveragePrice FROM Products;</code><br> <strong>sum()</strong>：求和<br> <strong>max()</strong>：获取某列最大值，<code>min()</code>则相反<br> <strong>ceil()</strong>：想上取整，同<code>ceiling()</code><br> <strong>floor()</strong>：向下取整<br> <strong>count()</strong>：统计数值<br> <strong>mod()</strong>：取模<br> <strong>greatest()</strong>：返回列表最大值，<code>SELECT GREATEST(3, 12, 34, 8, 25);</code>，<code>least()</code>则相反<br> <strong>pow()</strong>：幂运算，同<code>power()</code>，<code>SELECT POW(4, 3);</code><br> <strong>rand()</strong>：返回一个大于等于0小于1的浮点数。<br> <strong>round()</strong>：将数值进行四舍五入。四舍五入到小数点后两位：<code>SELECT ROUND(135.375, 2);</code><br> <strong>sqrt()</strong>：平方根</p> <p>除此之外还有许多都是数学函数，类似三角函数与反三角函数，弧度角度转换函数，对数函数等。</p> <h4 id="_4-3-3-日期与时间函数"><a href="#_4-3-3-日期与时间函数" class="header-anchor">#</a> 4.3.3 日期与时间函数</h4> <p><strong>curdate()</strong>：当前日期，同<code>current_date()</code><br> <strong>curtime()</strong>：当前时间，同<code>current_time()</code><br> <strong>current_timestamp()</strong>：当前日期加时间，类似<code>now()</code>，<code>localtime()</code><br> <strong>datediff()</strong>：日期差，<code>SELECT DATEDIFF(&quot;2017-06-25&quot;, &quot;2017-06-15&quot;);</code><br> <strong>adddate()</strong>：增加日期，<code>SELECT ADDDATE(&quot;2017-06-15&quot;, INTERVAL 10 DAY);</code><br> <strong>addtime()</strong>：增加时间，<code>SELECT ADDTIME(&quot;2017-06-15 09:34:21&quot;, &quot;2&quot;);</code></p> <p>此处基本没介绍年月日时分秒，但是相关函数都有。</p> <h4 id="_4-4-4-流程控制函数"><a href="#_4-4-4-流程控制函数" class="header-anchor">#</a> 4.4.4 流程控制函数</h4> <p>不知道为什么官方手册把这归结到函数而不是语句，但这都不是重点，重点是流程控制。</p> <p>因为觉得介绍看的不如直接上代码，所以这里直接上代码。</p> <ul><li>case、then、when、else、end</li></ul> <p>这是一套十分常见的流程控制组合。</p> <div class="language-SQL line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">CASE</span> <span class="token number">1</span> <span class="token keyword">WHEN</span> <span class="token number">1</span> <span class="token keyword">THEN</span> <span class="token string">'one'</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">WHEN</span> <span class="token number">2</span> <span class="token keyword">THEN</span> <span class="token string">'two'</span> <span class="token keyword">ELSE</span> <span class="token string">'more'</span> <span class="token keyword">END</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'one'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">CASE</span> <span class="token keyword">WHEN</span> <span class="token number">1</span><span class="token operator">&gt;</span><span class="token number">0</span> <span class="token keyword">THEN</span> <span class="token string">'true'</span> <span class="token keyword">ELSE</span> <span class="token string">'false'</span> <span class="token keyword">END</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'true'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">CASE</span> <span class="token keyword">BINARY</span> <span class="token string">'B'</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span>     <span class="token keyword">WHEN</span> <span class="token string">'a'</span> <span class="token keyword">THEN</span> <span class="token number">1</span> <span class="token keyword">WHEN</span> <span class="token string">'b'</span> <span class="token keyword">THEN</span> <span class="token number">2</span> <span class="token keyword">END</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">NULL</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>IF(expr1,expr2,expr3)</li></ul> <p>如果 expr1 为 TRUE（expr1 &lt;&gt; 0 和 expr1 &lt;&gt; NULL），IF() 返回 expr2。否则，它返回 expr3。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&gt;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">3</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'yes'</span><span class="token punctuation">,</span><span class="token string">'no'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'yes'</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">IF</span><span class="token punctuation">(</span>STRCMP<span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span><span class="token string">'test1'</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">'no'</span><span class="token punctuation">,</span><span class="token string">'yes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'no'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>IFNULL(expr1,expr2)</li></ul> <p>如果 expr1 不为 NULL，则 IFNULL() 返回 expr1；否则返回 expr2。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token boolean">NULL</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">10</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">10</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> IFNULL<span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'yes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'yes'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>NULLIF(expr1,expr2)</li></ul> <p>如果 expr1 = expr2 为真，则返回 NULL，否则返回 expr1。这与 CASE WHEN expr1 = expr2 THEN NULL ELSE expr1 END 相同。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">NULLIF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">NULL</span>
mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token keyword">NULLIF</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_5-高级部分"><a href="#_5-高级部分" class="header-anchor">#</a> 5. 高级部分</h2> <h3 id="_5-1-子查询-subquery"><a href="#_5-1-子查询-subquery" class="header-anchor">#</a> 5.1 子查询（subquery）</h3> <p>子查询就是嵌套在其他查询中的查询。</p> <p>举个栗子</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> <span class="token keyword">column</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">where</span> <span class="token keyword">column</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token keyword">column</span> <span class="token keyword">from</span> <span class="token keyword">table</span> <span class="token keyword">where</span> <span class="token keyword">column</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>以上是最为简单的子查询，接下来介绍一种作为<strong>计算字段的子查询</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> column1 <span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">)</span> <span class="token keyword">from</span> table2 <span class="token keyword">where</span> table1<span class="token punctuation">.</span>column1 <span class="token operator">=</span> table2<span class="token punctuation">.</span>column1<span class="token punctuation">)</span> <span class="token keyword">from</span> table1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这里提前使用了联表，目的是为了查出当前的某些主题在其他表的其他统计信息。</p> <h3 id="_5-2-连表查询-join"><a href="#_5-2-连表查询-join" class="header-anchor">#</a> 5.2 连表查询（join）</h3> <p><strong>连表查询</strong>是SQL中十分常见的做法，因为如果把所有信息都放在同一张表中的话，那么这张表将会十分复杂，并且有些信息可能是大量重复的数据，所以连表查询也可以减少数据库的空间占用。</p> <p>通常的做法是提供多张表，然后在关联表中使用一个字段与主表的<strong>主键</strong>进行关联，因此关联表中的这个字段也被称为<strong>外键</strong>。</p> <p>既然数据存放在不同表，那么使用简单查询就不可能查询出我们需要的所有信息，所以此时就需要使用连表查询。</p> <p>举个例子，现在有一张商品表products与订单表orders，我们需要从订单金额大于500的商品信息（在商品表才有商品信息，订单表只有商品id），所以此时我们可以这样：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> product<span class="token punctuation">.</span>product_name<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>amount <span class="token keyword">from</span> orders<span class="token punctuation">,</span> products <span class="token keyword">where</span> orders<span class="token punctuation">.</span>product_id <span class="token operator">=</span> products<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在上面的SQL语句中，我们在查询了两个在不同表的字段 <strong>（</strong> 使用表名.列名的方式，这种方式称之为 <strong>完全限定名）</strong> ，通过from后面添加两张表名（使用逗号隔开），并且在where条件中补充连接关系，这样便是一个最简单的连表查询。</p> <p>如果不在where条件中补充联结关系，那么返回的结果将会是两表的笛卡尔积，这种方式也称之为<strong>交叉连接</strong>（<code>cross join</code>）。</p> <ul><li><strong>内连接</strong></li></ul> <p>连接其实也分为不同的类型，上述的写法其实是<strong>内连接</strong>的简化写法，事实上它和以下这种写法是一样的</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> product<span class="token punctuation">.</span>product_name<span class="token punctuation">,</span> orders<span class="token punctuation">.</span>amount <span class="token keyword">from</span> orders <span class="token keyword">inner</span> <span class="token keyword">join</span> products <span class="token keyword">on</span> orders<span class="token punctuation">.</span>product_id <span class="token operator">=</span> products<span class="token punctuation">.</span>id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>两者的区别在乎这里我们明确使用了<code>inner join</code>关键字进行内连接，同时使用<code>on</code>而不是<code>where</code>进行连接关系的补充。</p> <p>连接不仅局限于两张表，如果需要连接多张表，则需要继续补充相应的连接关系。但是需要注意，连表是有性能代价的，<strong>连接的表越多，性能下降也越大。</strong></p> <ul><li><strong>外连接</strong></li></ul> <p>外连接与内连接不同在于，内连接只会返回匹配的行，而外连接除了返回匹配的行还会返回不匹配的行。</p> <p>外连接通常分为<strong>左外连接</strong>（<code>left outer join</code>，简写为<code>left join</code>）与<strong>右外连接</strong>(<code>right outer join</code>，简写为<code>right join</code>)。</p> <div class="custom-block warning"><p class="title"></p><p>MySQL是没有<code>full join</code>的，想实现这个功能可以考虑下面的组合查询（union）。</p></div><p>左外连接即使返回左表的所有行，即使行没有与右表相匹配，右连接则相反。</p> <p>通过韦恩图可以获得更为直观的信息。</p> <p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_innerjoin.gif" alt="img_innerjoin.gif"></p> <p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_leftjoin.gif" alt="img_leftjoin.gif"></p> <p><img src="https://www.runoob.com/wp-content/uploads/2014/03/img_rightjoin.gif" alt="img_rightjoin.gif"></p> <ul><li><strong>自连接</strong></li></ul> <p>自连接是把同一张表进行联表查的方式，自连接的好处在于对于那些只在一张表使用子查询时，可以考虑自连接，因为自连接的性能通常会比子查询要好（需要你自己测试）。</p> <p>下面举个例子，假设我们有张教师表，我们需要从该表中查询出所有科目等于<strong>id为1的老师的科目</strong>的教师姓名，此时如果使用子查询则可以：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> subject <span class="token keyword">from</span> teachers <span class="token keyword">where</span> subject <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">select</span> subject <span class="token keyword">from</span> teachers <span class="token keyword">where</span> id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>自连接的方式：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> t1<span class="token punctuation">.</span>name<span class="token punctuation">,</span> t1<span class="token punctuation">.</span>subject <span class="token keyword">from</span> teachers t1<span class="token punctuation">,</span> teachers t2 <span class="token keyword">where</span> t1<span class="token punctuation">.</span>subject <span class="token operator">=</span> t2<span class="token punctuation">.</span>subject <span class="token operator">and</span> t2<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="title"></p><p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/join.html" target="_blank" rel="noopener noreferrer">官方手册 - JOIN Clause<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><h3 id="_5-3-组合查询-union"><a href="#_5-3-组合查询-union" class="header-anchor">#</a> 5.3 组合查询（union）</h3> <p>组合查询其实就是把多个查询结果进行并集处理。在上述连表查询中我们提到过使用组合查询实现全连接，通过左连接与右连接进行并集处理，返回的结果正好是全连接，通过上述的韦恩图也可以非常直观的感受到。</p> <p>组合查询的使用非常简单，但是这里仍然给出一个例子：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token keyword">level</span> <span class="token keyword">from</span> teachers <span class="token keyword">where</span> age <span class="token operator">&lt;=</span> <span class="token number">30</span> <span class="token keyword">union</span> <span class="token keyword">select</span> name<span class="token punctuation">,</span> age<span class="token punctuation">,</span> <span class="token keyword">level</span> <span class="token keyword">from</span> teachers <span class="token keyword">where</span> <span class="token keyword">level</span> <span class="token operator">&gt;=</span> <span class="token number">3</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>上述的需求可能是，最近学校要选出一些教师，要求教师年纪最好要小（30之内），如果年纪大了的话，那么等级必须大于3，因此使用并集处理就可以获取我们所有符合条件的教师。</p> <p>你可能会疑惑在这个情况下，使用or不也能完成嘛。事实上这里仅仅是为了介绍union的使用，实际上union的结果集大多不在一张表，而且也不会如此简单。</p> <div class="custom-block warning"><p class="title"></p><p>在使用union时，你应该注意，union必须连接两条或以上的select语句，并且每个查询必须包含相同的列，表达式或者聚集函数（顺序可以不同），此外，列的数据也必须兼容（不必完全相同，但需要能隐式转换）。</p></div><div class="custom-block warning"><p class="title"></p><p>需要注意的是，union默认会合并重复行，比如上方的例子中在30岁以下的同时level大于3的教师就会被自动合并，如果不想被合并可以使用<code>union all</code>即可。</p></div><div class="custom-block warning"><p class="title"></p><p>对union的排序不应该对单独的select语句进行排序，而是应该在最后进行一个<code>order by</code>排序即可。</p></div><h3 id="_5-4-全文索引-fulltext-index"><a href="#_5-4-全文索引-fulltext-index" class="header-anchor">#</a> 5.4 全文索引（fulltext index）</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>手册参考：
- [官方手册8.0 - 全文索引功能](https://dev.mysql.com/doc/refman/8.0/en/fulltext-search.html)  
- [官方手册8.0 - InnoDB全文索引](https://dev.mysql.com/doc/refman/8.0/en/innodb-fulltext-index.html)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>全文索引通常用于加快基于大文本列的查询。MySQL早期的只有MyISAM引擎支持全文索引，不过在5.6之后，InnoDB引擎也开始支持全文索引，但是这个分词默认是针对英文的，中文的分词在5.7开始内置了ngram插件，这个插件可以支持中文、日语、韩语，所以对于想使用中文索引的人建议使用5.7+的版本。</p> <p>InnoDB全文索引采用倒排索引设计。倒排索引存储一个单词列表，对于每个单词，还有一个该单词出现的文档列表。为了支持邻近搜索，每个单词的位置信息也被作为字节偏移进行存储。</p> <p>对于大型数据集，将数据加载到没有FULLTEXT索引的表然后创建索引比将数据加载到具有现有FULLTEXT索引的表要快得多。</p> <ul><li><strong>全文索引的创建与删除</strong></li></ul> <p>创建：</p> <div class="language-sql line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> opening_lines <span class="token punctuation">(</span>
       id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
       opening_line <span class="token keyword">TEXT</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       author <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
       FULLTEXT idx <span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span>
       <span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-sql line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br></div><pre class="language-sql"><code> <span class="token keyword">CREATE</span> FULLTEXT <span class="token keyword">INDEX</span> idx <span class="token keyword">ON</span> opening_lines<span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-sql line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br><br></div><pre class="language-sql"><code><span class="token comment">-- 此方法添加的索引名即为列名</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> opening_lines  
<span class="token keyword">ADD</span> FULLTEXT<span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="custom-block warning"><p class="title"></p><p>将全文索引添加到没有<code>FTS_DOC_ID</code>列的表时，会返回<code>InnoDB rebuilding table to add column FTS_DOC_ID</code>警告。<br>
如果您不关心<code>CREATE FULLTEXT INDEX</code>性能，请忽略该<code>FTS_DOC_ID</code>列， InnoDB为您创建它。</p></div><p>删除：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">drop</span> <span class="token keyword">index</span> idx <span class="token keyword">on</span> opening_lines
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>或者</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">alter</span> <span class="token keyword">table</span> opening_lines <span class="token keyword">drop</span> <span class="token keyword">index</span> idx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>使用全文索引</strong></li></ul> <p>通过在where之后添加<code>match()</code>,<code>against()</code>即可根据全文索引搜索，需要注意的是，在默认分词插件下，通常是通过空格,逗号，句号进行分词，并且较短的字符串（默认是3）是不会被收录到单词列表。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> opening_line <span class="token keyword">from</span> opening_lines <span class="token keyword">where</span> <span class="token keyword">match</span><span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span> against<span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="custom-block tip"><p class="title"></p><p>默认情况下，搜索以不区分大小写的方式执行。要执行区分大小写的全文搜索，请对索引列使用区分大小写或二进制排序规则。例如，utf8mb4 可以为使用字符集的列分配排序规则 utf8mb4_0900_as_cs或 utf8mb4_bin使其区分大小写以进行全文搜索。</p></div><p>在某些情况下，使用like操作也能完成类似的操作，但是like的效率比较低（精度高）。而全文索引降低了一些精度，换来分析结果相关度，这一点是非常重要的，在下面我们将继续通过一个例子来介绍如何查询结果相关度或者权重。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> opening_line<span class="token punctuation">,</span> <span class="token keyword">match</span><span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span> against<span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> weight <span class="token keyword">from</span> opening_lines
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>通过将<code>match(opening_line) against('xxx')</code>作为字段，我们可以看到每列对于该索引条件的权重。</p> <p>默认通过全文索引查询的结果就是根据权重进行排序的，这一点是<code>like</code>这种高精度硬匹配所无法做到的。</p> <p>在上述示例中，我们没有介绍全文索引的工作模式，<strong>默认情况下</strong>，全文索引使用<strong>自然语言模式</strong>，即<code>IN NATURAL LANGUAGE MODE</code>，除了该模式外，还有<strong>布尔模式</strong>和<strong>查询扩展模式</strong>。</p> <p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-natural-language.html" target="_blank" rel="noopener noreferrer">官方手册8.0 - 自然语言全文搜索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>布尔模式</strong>：布尔模式通常对字符串进行一些逻辑判断，比如判断某些单词存在同时某些单词不存在可以这样：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> articles <span class="token keyword">WHERE</span> <span class="token keyword">MATCH</span> <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span>
    AGAINST <span class="token punctuation">(</span><span class="token string">'+MySQL -YourSQL'</span> <span class="token operator">IN</span> <span class="token keyword">BOOLEAN</span> <span class="token keyword">MODE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在上述示例中，<code>+</code>和<code>-</code>运算符分别指示一个词必须存在或不存在，<code>IN BOOLEAN MODE</code>用于确定采用布尔模式。</p> <p>除了<code>+</code>和<code>-</code>之外还有许多其他的运算符，同时布尔查询也不会按照相关度进行排序。</p> <p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-boolean.html" target="_blank" rel="noopener noreferrer">官方手册8.0 - 布尔全文搜索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><strong>查询扩展模式</strong>：如果你想对结果进行扩展（即使结果不包含相关关键词），那么你可以使用<code>with query expansion</code>。</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">select</span> opening_line <span class="token keyword">from</span> opening_lines <span class="token keyword">where</span> <span class="token keyword">match</span><span class="token punctuation">(</span>opening_line<span class="token punctuation">)</span> against<span class="token punctuation">(</span><span class="token string">'xxx'</span> <span class="token keyword">with</span> query expansion<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>举个例子，你需要查询的词为<code>Newtons</code>，现在有一条记录为<code>Apple fell on Newton's head.</code>，那么与之相关词的就可能是<code>head</code>，所以结果可能就会返会包含<code>head</code>的记录。</p> <p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-query-expansion.html" target="_blank" rel="noopener noreferrer">官方手册8.0 - 带有查询扩展的全文搜索<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>ngram 全文解析器</strong></li></ul> <p>ngram是<code>mysql 5.7</code>开始内置的中文分词插件，根据n来确定分词基数的，在中文情况下，词语通常为两个字，所以ngram默认的token size就是2，但是这个值也可以进行配置，取值范围为[1,10].</p> <ol><li>命令行参数配置：<code>mysqld --ngram_token_size=2</code></li> <li>配置文件：</li></ol> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token section"><span class="token punctuation">[</span><span class="token section-name selector">mysqld</span><span class="token punctuation">]</span></span>
<span class="token key attr-name">ngram_token_size</span><span class="token punctuation">=</span><span class="token value attr-value">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>创建时指定ngram作为解析器：</p> <div class="language-sql line-numbers-mode"><div class="highlight-lines"><br><br><br><br><div class="highlighted"> </div><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br></div><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> articles <span class="token punctuation">(</span>
      id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
      title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
      FULLTEXT <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">WITH</span> PARSER ngram
    <span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4<span class="token punctuation">;</span>
    
<span class="token keyword">CREATE</span> FULLTEXT <span class="token keyword">INDEX</span> ft_index <span class="token keyword">ON</span> articles <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">WITH</span> PARSER ngram<span class="token punctuation">;</span>

<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> articles <span class="token keyword">ADD</span> FULLTEXT <span class="token keyword">INDEX</span> ft_index <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">WITH</span> PARSER ngram<span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="custom-block warning"><p class="title"></p><p>默认情况下，ngram 解析器使用默认停用词列表，其中包含英文停用词列表。对于适用于中文、日语或韩语的停用词列表，您必须创建自己的停用词列表。有关创建停用词列表的信息，请参阅<a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-stopwords.html" target="_blank" rel="noopener noreferrer">全文停用词<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>Github中文停用词仓库: <a href="https://github.com/goto456/stopwords" target="_blank" rel="noopener noreferrer">https://github.com/goto456/stopwords<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div><p>对于<strong>自然语言模式</strong>，搜索词被转换为ngram<strong>词的联合</strong>。例如默认分词基数（2）的情况下，“长安城”将被分解成“长安 安城”，如果现在有两条记录，分别包含“长安”，“长安城”，那么在自然语言模式下，他们都将被匹配。</p> <p>对于<strong>布尔模式</strong>，搜索词将转换为ngram<strong>短语搜索</strong>，同样在上述情况，则只有“长安城”被匹配。</p> <p>如果你想查询分词的结果，官方有个示例：</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>mysql<span class="token operator">&gt;</span> <span class="token keyword">USE</span> test<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> articles <span class="token punctuation">(</span>
      id <span class="token keyword">INT</span> <span class="token keyword">UNSIGNED</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
      title <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      body <span class="token keyword">TEXT</span><span class="token punctuation">,</span>
      FULLTEXT <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">WITH</span> PARSER ngram
    <span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> utf8mb4<span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> NAMES utf8mb4<span class="token punctuation">;</span>

<span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> articles <span class="token punctuation">(</span>title<span class="token punctuation">,</span>body<span class="token punctuation">)</span> <span class="token keyword">VALUES</span>
    <span class="token punctuation">(</span><span class="token string">'数据库管理'</span><span class="token punctuation">,</span><span class="token string">'在本教程中我将向你展示如何管理数据库'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token string">'数据库应用开发'</span><span class="token punctuation">,</span><span class="token string">'学习开发数据库应用程序'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SET</span> <span class="token keyword">GLOBAL</span> innodb_ft_aux_table<span class="token operator">=</span><span class="token string">&quot;test/articles&quot;</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> INFORMATION_SCHEMA<span class="token punctuation">.</span>INNODB_FT_INDEX_CACHE <span class="token keyword">ORDER</span> <span class="token keyword">BY</span> doc_id<span class="token punctuation">,</span> position<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/fulltext-search-ngram.html" target="_blank" rel="noopener noreferrer">官方手册8.0 - ngram 全文解析器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5-5-视图-view"><a href="#_5-5-视图-view" class="header-anchor">#</a> 5.5 视图（view）</h3> <p>在 SQL 中，视图是基于 SQL 语句的结果集的可视化的<strong>虚拟</strong>表。</p> <p>视图包含行和列，就像一个真实的表。视图中的字段就是来自一个或多个数据库中的真实的表中的字段。我们可以向视图添加 SQL 函数、WHERE 以及 JOIN 语句，我们也可以提交数据，就像这些来自于某个单一的表。</p> <div class="custom-block tip"><p class="title"></p><ul><li>数据库的设计和结构不会受到视图中的函数、where 或 join 语句的影响。</li> <li>视图总是显示最近的数据。每当用户查询视图时，数据库引擎通过使用 SQL 语句来重建数据。</li></ul></div><div class="custom-block warning"><p class="title"></p><ul><li>视图名与表名不可重复。</li> <li>使用复杂视图前请测试性能。</li></ul></div><p><strong>视图的好处</strong></p> <ol><li>重用sql</li> <li>简化sql</li> <li>保护数据，只能操作表的特定部分</li></ol> <p><strong>基本用法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建视图</span>
<span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token punctuation">[</span>Products Above Average Price<span class="token punctuation">]</span> <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> ProductName<span class="token punctuation">,</span>UnitPrice
<span class="token keyword">FROM</span> Products
<span class="token keyword">WHERE</span> UnitPrice<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token keyword">SELECT</span> <span class="token function">AVG</span><span class="token punctuation">(</span>UnitPrice<span class="token punctuation">)</span> <span class="token keyword">FROM</span> Products<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询视图</span>
<span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> <span class="token punctuation">[</span>Products Above Average Price<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 查看视图创建过程</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">VIEW</span> <span class="token punctuation">[</span>Products Above Average Price<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 更新视图</span>
<span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">VIEW</span> <span class="token punctuation">[</span>视图名<span class="token punctuation">]</span> <span class="token keyword">AS</span>
<span class="token keyword">SELECT</span> column_name<span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token keyword">FROM</span> table_name
<span class="token keyword">WHERE</span> condition<span class="token punctuation">;</span>
<span class="token comment"># 删除视图</span>
<span class="token keyword">DROP</span> <span class="token keyword">VIEW</span> <span class="token punctuation">[</span>视图名<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_5-6-存储过程-stored-procedure"><a href="#_5-6-存储过程-stored-procedure" class="header-anchor">#</a> 5.6 存储过程（Stored Procedure）</h3> <p>存储过程（Stored Procedure）是在大型数据库系统中，<strong>一组为了完成特定功能的SQL 语句集</strong>。</p> <p>它存储在数据库中，一次编译后永久有效，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。</p> <div class="custom-block tip"><p class="title"></p><p>存储过程的优点：可重用、使用简单、安全、高性能。</p> <p>存储过程的创建权限与执行权限是分开的。</p></div><div class="custom-block warning"><p class="title"></p><p>一般来说，存储过程的编写比基本SQL语句复杂，编写存储过程需要更高的技能，更丰富的经验。</p></div><p>以下仅介绍基本的语法，实际上的存储过程十分复杂，建议参考：</p> <ul><li><a href="https://www.runoob.com/w3cnote/mysql-stored-procedure.html" target="_blank" rel="noopener noreferrer">MySQL 存储过程 | 菜鸟教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://dev.mysql.com/doc/refman/8.0/en/create-procedure.html" target="_blank" rel="noopener noreferrer">CREATE PROCEDURE and CREATE FUNCTION Statements | MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <p><strong>基本用法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建存储过程</span>
<span class="token keyword">CREATE</span> <span class="token keyword">PROCEDURE</span> two_sum<span class="token punctuation">(</span>
	<span class="token operator">in</span> num1 <span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token comment"># 入参</span>
	<span class="token operator">in</span> num2 <span class="token keyword">int</span><span class="token punctuation">,</span>
	<span class="token keyword">out</span> sum <span class="token keyword">int</span> <span class="token comment"># 出参</span>
<span class="token punctuation">)</span>
<span class="token keyword">begin</span>
	<span class="token keyword">select</span> num1<span class="token operator">+</span>num2 <span class="token keyword">into</span> sum<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
<span class="token comment"># 查看存储过程创建过程</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">procedure</span> two_sum<span class="token punctuation">;</span>
<span class="token comment"># 调用存储过程</span>
<span class="token keyword">call</span> two_sum<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token variable">@ans</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 查询存储过程返回的变量</span>
<span class="token keyword">select</span> <span class="token variable">@ans</span><span class="token punctuation">;</span> <span class="token comment"># 2</span>
<span class="token comment"># 删除存储过程</span>
<span class="token keyword">drop</span> <span class="token keyword">procedure</span> two_sum<span class="token punctuation">;</span>
<span class="token comment"># 修改存储过程只能改变存储过程的特征，不能修改过程的参数以及过程体。</span>
<span class="token keyword">ALTER</span> <span class="token keyword">PROCEDURE</span> proc_name <span class="token punctuation">[</span>characteristic <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>

characteristic: {
    <span class="token keyword">COMMENT</span> <span class="token string">'string'</span>
  <span class="token operator">|</span> <span class="token keyword">LANGUAGE</span> <span class="token keyword">SQL</span>
  <span class="token operator">|</span> { <span class="token keyword">CONTAINS</span> <span class="token keyword">SQL</span> <span class="token operator">|</span> <span class="token keyword">NO</span> <span class="token keyword">SQL</span> <span class="token operator">|</span> <span class="token keyword">READS</span> <span class="token keyword">SQL</span> <span class="token keyword">DATA</span> <span class="token operator">|</span> <span class="token keyword">MODIFIES</span> <span class="token keyword">SQL</span> <span class="token keyword">DATA</span> }
  <span class="token operator">|</span> <span class="token keyword">SQL</span> SECURITY { <span class="token keyword">DEFINER</span> <span class="token operator">|</span> <span class="token keyword">INVOKER</span> }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><div class="custom-block warning"><p class="title"></p><p>默认的MySQL语句分隔符为<code>;</code>，如果你使用的是mysql命令行创建存储过程，则<code>;</code>会被忽略而导致语法错误。
解决办法是临时更改命令行实用程序的语句分隔符</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 临时修改为//</span>
<span class="token keyword">delimiter</span> <span class="token comment">//</span>
<span class="token comment"># 修改为正常情况</span>
<span class="token keyword">delimiter</span> <span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><h3 id="_5-7-游标-cursor"><a href="#_5-7-游标-cursor" class="header-anchor">#</a> 5.7 游标（cursor）</h3> <p>游标是一个存储在MySQL服务器上的数据库查询， 它不是一条SELECT语句，而是被该语句检索出来的结果集。</p> <p>游标在MySQL中只能与存储过程协同使用。</p> <p><strong>基础使用</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">create</span> <span class="token keyword">procedure</span> testcursor<span class="token punctuation">(</span><span class="token keyword">out</span> res <span class="token keyword">int</span><span class="token punctuation">)</span>
<span class="token keyword">begin</span>

	<span class="token comment">-- 定义本地变量done</span>
	<span class="token keyword">declare</span> done <span class="token keyword">boolean</span> <span class="token keyword">default</span> <span class="token number">0</span><span class="token punctuation">;</span>

	<span class="token comment">-- 创建游标</span>
	<span class="token keyword">declare</span> mycursor <span class="token keyword">cursor</span>
	<span class="token keyword">for</span>
	<span class="token keyword">select</span> id <span class="token keyword">from</span> gowow_admin<span class="token punctuation">;</span>


	<span class="token comment">-- '02000'事件(未找到条件，fetch循环到最后触发)触发设置done变量</span>
	<span class="token keyword">declare</span> <span class="token keyword">continue</span> <span class="token keyword">handler</span> <span class="token keyword">for</span> sqlstate <span class="token string">'02000'</span> <span class="token keyword">set</span> done <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	
	<span class="token comment">-- 打开游标</span>
	<span class="token keyword">open</span> mycursor<span class="token punctuation">;</span>
	
	<span class="token comment">-- 循环</span>
	<span class="token keyword">repeat</span>
		<span class="token comment">-- 使用游标</span>
		<span class="token keyword">fetch</span> mycursor <span class="token keyword">into</span> res<span class="token punctuation">;</span>
	until done <span class="token keyword">end</span> <span class="token keyword">repeat</span><span class="token punctuation">;</span>
	
	<span class="token comment">-- 关闭游标</span>
	<span class="token keyword">close</span> mycursor<span class="token punctuation">;</span>
<span class="token keyword">end</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><div class="custom-block warning"><p class="title"></p><p><strong>DECLARE语句的次序</strong></p> <p>DECLARE语句的发布存在特定的次序。用DECLARE语句定义的局部变量必须在定义任意游标或句柄之前定义，而句柄必须在游标之后定义。不遵守此顺序将产生错误消息。</p></div><h3 id="_5-8-触发器-trigger"><a href="#_5-8-触发器-trigger" class="header-anchor">#</a> 5.8 触发器（trigger）</h3> <p>触发器是存储在数据库目录中的一组SQL语句。每当与表相关联的<strong>事件</strong>发生时，就会执行或触发SQL触发器，例如<strong>插入</strong>，<strong>更新</strong>或<strong>删除</strong>。</p> <p>触发事刻有两种状态，分别是<code>before</code>和<code>after</code>。</p> <p>使用<code>before</code>可以使用<code>OLD</code>来获取修改前的临时表数据。</p> <p>使用<code>after</code>可以使用<code>NEW</code>来获取修改后的临时表数据。</p> <p><strong>基本用法</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建触发器 MySQL5之后不允许返回结果 所以使用变量接收</span>
<span class="token keyword">create</span> <span class="token keyword">trigger</span> mytrigger <span class="token keyword">after</span> <span class="token keyword">insert</span> <span class="token keyword">on</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
<span class="token keyword">for each row</span> <span class="token keyword">select</span> <span class="token string">&quot;my trigger is staring&quot;</span> <span class="token keyword">into</span> <span class="token variable">@res</span><span class="token punctuation">;</span>
<span class="token comment"># 删除触发器</span>
<span class="token keyword">drop</span> <span class="token keyword">trigger</span> mytrigger<span class="token punctuation">;</span>

<span class="token comment"># 触发器不能被更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/trigger-syntax.html" target="_blank" rel="noopener noreferrer">Trigger Syntax and Examples | MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_5-9-事务-transaction"><a href="#_5-9-事务-transaction" class="header-anchor">#</a> 5.9 事务（transaction）</h3> <p><strong>事务</strong> 的概念：一组sql语句，我们需要让它要么全部成功，要不直接失败。失败时触发的操作称之为<strong>回滚（rollback）</strong>，当且仅当事务全部执行成功时，事务才被<strong>提交（commit）</strong>。同时事务中还可设置<strong>保留点（savepoint）</strong>，它可以仅回滚到某个状态而不是回退整个事务。</p> <p><strong>基本使用</strong></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">start</span> <span class="token keyword">transaction</span><span class="token punctuation">;</span>
<span class="token comment"># 一些操作</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">savepoint</span> sp1<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">rollback</span> <span class="token keyword">to</span> sp1<span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">rollback</span><span class="token punctuation">;</span>
<span class="token keyword">commit</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>MySQL默认状态下<code>autocommit = 1</code>，所以你每次输入SQL语句都会自动提交并立即生效，你可以通过设置<code>set autocommit = 0</code>来关闭自动提交。</p> <p>更多参考：<a href="https://dev.mysql.com/doc/refman/8.0/en/commit.html" target="_blank" rel="noopener noreferrer">START TRANSACTION, COMMIT, and ROLLBACK Statements | MySQL<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_6-一些提示与建议"><a href="#_6-一些提示与建议" class="header-anchor">#</a> 6. 一些提示与建议</h2> <h3 id="_6-1-select语句的关键字顺序"><a href="#_6-1-select语句的关键字顺序" class="header-anchor">#</a> 6.1 select语句的关键字顺序</h3> <p>依次为，<code>select</code>、<code>from</code>、<code>where</code>、<code>group by</code>、<code>having</code>、<code>order by</code>、<code>limit</code></p> <h2 id="_7-常见sql语句"><a href="#_7-常见sql语句" class="header-anchor">#</a> 7. 常见SQL语句</h2> <h3 id="_7-1-数据库相关"><a href="#_7-1-数据库相关" class="header-anchor">#</a> 7.1 数据库相关</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建数据库</span>
<span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>数据库名<span class="token punctuation">]</span> <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token punctuation">[</span>字符编码<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 查看数据库</span>
<span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
<span class="token comment"># 查看数据库创建详情</span>
<span class="token keyword">show</span> <span class="token keyword">create</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>数据库名字<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 修改数据库编码</span>
<span class="token keyword">alter</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>数据库名<span class="token punctuation">]</span> <span class="token keyword">character</span> <span class="token keyword">set</span> <span class="token punctuation">[</span>字符编码<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 切换当前数据库</span>
<span class="token keyword">use</span> <span class="token punctuation">[</span>数据库名<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 删除数据库</span>
<span class="token keyword">drop</span> <span class="token keyword">database</span> <span class="token punctuation">[</span>数据库名<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_7-2-表相关"><a href="#_7-2-表相关" class="header-anchor">#</a> 7.2 表相关</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 创建表格</span>
<span class="token keyword">create</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span>
<span class="token punctuation">(</span>
	id <span class="token keyword">int</span> <span class="token operator">not</span> <span class="token boolean">null</span> <span class="token keyword">auto_increment</span><span class="token punctuation">,</span>
    name <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token operator">not</span> <span class="token boolean">null</span><span class="token punctuation">,</span>
    email <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">)</span> <span class="token boolean">null</span>
    <span class="token keyword">enable</span> <span class="token keyword">tinyint</span> <span class="token keyword">default</span> <span class="token number">1</span>
    <span class="token keyword">primary</span> <span class="token keyword">key</span> <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">engine</span> <span class="token operator">=</span> <span class="token keyword">InnoDB</span><span class="token punctuation">;</span>
<span class="token comment"># 新增列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span> <span class="token keyword">add</span> age <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment"># 删除列</span>
<span class="token keyword">alter</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span> <span class="token keyword">drop</span> <span class="token keyword">column</span> age<span class="token punctuation">;</span>
<span class="token comment"># 重命名表</span>
<span class="token keyword">rename</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>旧表名<span class="token punctuation">]</span> <span class="token keyword">to</span> <span class="token punctuation">[</span>新表名<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment"># 删除表</span>
<span class="token keyword">drop</span> <span class="token keyword">table</span> <span class="token punctuation">[</span>表名<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_7-3-用户权限相关"><a href="#_7-3-用户权限相关" class="header-anchor">#</a> 7.3 用户权限相关</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 切换到mysql数据库</span>
<span class="token keyword">use</span> mysql<span class="token punctuation">;</span>
<span class="token comment"># 查看所有用户</span>
<span class="token keyword">select</span> <span class="token keyword">user</span> <span class="token keyword">from</span> <span class="token keyword">user</span><span class="token punctuation">;</span>
<span class="token comment"># 新建用户</span>
<span class="token keyword">create</span> <span class="token keyword">user</span> <span class="token string">'test'</span> identified <span class="token keyword">by</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
<span class="token comment"># 绑定主机</span>
<span class="token comment"># create user 'test'@`localhost` identified by 'password';</span>
<span class="token comment"># 重命名用户</span>
<span class="token keyword">rename</span> <span class="token keyword">user</span> <span class="token identifier"><span class="token punctuation">`</span>test<span class="token punctuation">`</span></span> <span class="token keyword">to</span> <span class="token identifier"><span class="token punctuation">`</span>test2<span class="token punctuation">`</span></span><span class="token punctuation">;</span>
<span class="token comment"># 修改密码</span>
<span class="token keyword">alter</span> <span class="token keyword">user</span> root identified <span class="token keyword">by</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token comment"># 修改当前用户密码</span>
<span class="token keyword">set</span> password <span class="token operator">=</span> <span class="token string">'123456'</span><span class="token punctuation">;</span>
<span class="token comment"># 修改其他密码</span>
<span class="token keyword">set</span> password <span class="token keyword">for</span> test2 <span class="token operator">=</span> <span class="token string">'password'</span><span class="token punctuation">;</span>
<span class="token comment">#查看权限</span>
<span class="token keyword">show</span> grants <span class="token keyword">for</span> <span class="token identifier"><span class="token punctuation">`</span>test2<span class="token punctuation">`</span></span><span class="token punctuation">;</span> <span class="token comment"># 默认有个usage权限，其实就是无权限</span>
<span class="token comment"># 赋予全数据表查询权限</span>
<span class="token keyword">grant</span> <span class="token keyword">select</span> <span class="token keyword">on</span> learningmysql<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">to</span> test2<span class="token punctuation">;</span>
<span class="token comment"># 撤销权限</span>
<span class="token keyword">revoke</span> <span class="token keyword">select</span> <span class="token keyword">on</span> learningmysql<span class="token punctuation">.</span><span class="token operator">*</span> <span class="token keyword">from</span> test2<span class="token punctuation">;</span>
<span class="token comment"># 删除用户</span>
<span class="token keyword">drop</span> <span class="token keyword">user</span> <span class="token string">'test2'</span><span class="token punctuation">;</span>
<span class="token comment"># 更多参考：https://dev.mysql.com/doc/refman/8.0/en/grant.html</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="_7-4-字符集相关"><a href="#_7-4-字符集相关" class="header-anchor">#</a> 7.4 字符集相关</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment"># 查看字符集</span>
<span class="token keyword">show</span> <span class="token keyword">character</span> <span class="token keyword">set</span><span class="token punctuation">;</span>
<span class="token comment"># 查看校对顺序</span>
<span class="token keyword">show</span> collation<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_1-数据库相关概念" class="sidebar-link reco-side-_1-数据库相关概念" data-v-b57cc07c>1. 数据库相关概念</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_2-mysql概念及安装" class="sidebar-link reco-side-_2-mysql概念及安装" data-v-b57cc07c>2. MySQL概念及安装</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-基本关键字" class="sidebar-link reco-side-_3-基本关键字" data-v-b57cc07c>3. 基本关键字</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-1-select" class="sidebar-link reco-side-_3-1-select" data-v-b57cc07c>3.1 select</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-2-distinct" class="sidebar-link reco-side-_3-2-distinct" data-v-b57cc07c>3.2 distinct</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-3-limit" class="sidebar-link reco-side-_3-3-limit" data-v-b57cc07c>3.3 limit</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-4-order-by" class="sidebar-link reco-side-_3-4-order-by" data-v-b57cc07c>3.4 order by</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-5-where" class="sidebar-link reco-side-_3-5-where" data-v-b57cc07c>3.5 where</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-6-not" class="sidebar-link reco-side-_3-6-not" data-v-b57cc07c>3.6 not</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-7-between" class="sidebar-link reco-side-_3-7-between" data-v-b57cc07c>3.7 between</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-8-in" class="sidebar-link reco-side-_3-8-in" data-v-b57cc07c>3.8 in</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-9-and" class="sidebar-link reco-side-_3-9-and" data-v-b57cc07c>3.9 and</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-10-or" class="sidebar-link reco-side-_3-10-or" data-v-b57cc07c>3.10 or</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-11-like" class="sidebar-link reco-side-_3-11-like" data-v-b57cc07c>3.11 like</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-12-regexp" class="sidebar-link reco-side-_3-12-regexp" data-v-b57cc07c>3.12 regexp</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-13-as" class="sidebar-link reco-side-_3-13-as" data-v-b57cc07c>3.13 as</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-14-group-by" class="sidebar-link reco-side-_3-14-group-by" data-v-b57cc07c>3.14 group by</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-15-having" class="sidebar-link reco-side-_3-15-having" data-v-b57cc07c>3.15 having</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-16-insert" class="sidebar-link reco-side-_3-16-insert" data-v-b57cc07c>3.16 insert</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-17-update" class="sidebar-link reco-side-_3-17-update" data-v-b57cc07c>3.17 update</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_3-18-delete" class="sidebar-link reco-side-_3-18-delete" data-v-b57cc07c>3.18 delete</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_4-函数和运算符" class="sidebar-link reco-side-_4-函数和运算符" data-v-b57cc07c>4. 函数和运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_4-1-运算符" class="sidebar-link reco-side-_4-1-运算符" data-v-b57cc07c>4.1 运算符</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_4-2-函数" class="sidebar-link reco-side-_4-2-函数" data-v-b57cc07c>4.2 函数</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-高级部分" class="sidebar-link reco-side-_5-高级部分" data-v-b57cc07c>5. 高级部分</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-1-子查询-subquery" class="sidebar-link reco-side-_5-1-子查询-subquery" data-v-b57cc07c>5.1 子查询（subquery）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-2-连表查询-join" class="sidebar-link reco-side-_5-2-连表查询-join" data-v-b57cc07c>5.2 连表查询（join）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-3-组合查询-union" class="sidebar-link reco-side-_5-3-组合查询-union" data-v-b57cc07c>5.3 组合查询（union）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-4-全文索引-fulltext-index" class="sidebar-link reco-side-_5-4-全文索引-fulltext-index" data-v-b57cc07c>5.4 全文索引（fulltext index）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-5-视图-view" class="sidebar-link reco-side-_5-5-视图-view" data-v-b57cc07c>5.5 视图（view）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-6-存储过程-stored-procedure" class="sidebar-link reco-side-_5-6-存储过程-stored-procedure" data-v-b57cc07c>5.6 存储过程（Stored Procedure）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-7-游标-cursor" class="sidebar-link reco-side-_5-7-游标-cursor" data-v-b57cc07c>5.7 游标（cursor）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-8-触发器-trigger" class="sidebar-link reco-side-_5-8-触发器-trigger" data-v-b57cc07c>5.8 触发器（trigger）</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_5-9-事务-transaction" class="sidebar-link reco-side-_5-9-事务-transaction" data-v-b57cc07c>5.9 事务（transaction）</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_6-一些提示与建议" class="sidebar-link reco-side-_6-一些提示与建议" data-v-b57cc07c>6. 一些提示与建议</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_6-1-select语句的关键字顺序" class="sidebar-link reco-side-_6-1-select语句的关键字顺序" data-v-b57cc07c>6.1 select语句的关键字顺序</a></li><li class="level-2" data-v-b57cc07c><a href="/posts/2021/20210804.html#_7-常见sql语句" class="sidebar-link reco-side-_7-常见sql语句" data-v-b57cc07c>7. 常见SQL语句</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_7-1-数据库相关" class="sidebar-link reco-side-_7-1-数据库相关" data-v-b57cc07c>7.1 数据库相关</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_7-2-表相关" class="sidebar-link reco-side-_7-2-表相关" data-v-b57cc07c>7.2 表相关</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_7-3-用户权限相关" class="sidebar-link reco-side-_7-3-用户权限相关" data-v-b57cc07c>7.3 用户权限相关</a></li><li class="level-3" data-v-b57cc07c><a href="/posts/2021/20210804.html#_7-4-字符集相关" class="sidebar-link reco-side-_7-4-字符集相关" data-v-b57cc07c>7.4 字符集相关</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.f00b2d44.js" defer></script><script src="/assets/js/3.9e546140.js" defer></script><script src="/assets/js/1.e6bb5ad8.js" defer></script><script src="/assets/js/80.2c950173.js" defer></script>
  </body>
</html>
